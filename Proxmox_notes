
https://pve.proxmox.com/pve-docs/chapter-sysadmin.html#_default_configuration_using_a_bridge

# web access and SSH - start


sudo iptables-nft -F
sudo iptables-nft -t nat -F

# Allow loopback traffic
sudo iptables-nft -A INPUT -i lo -j ACCEPT
sudo iptables-nft -A OUTPUT -o lo -j ACCEPT

# Allow established and related connections
sudo iptables-nft -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
sudo iptables-nft -A OUTPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT

# SSH - Port forwarding 666 (external) to 666 (internal)
sudo iptables-nft -t nat -A PREROUTING -p tcp --dport 666 -j DNAT --to-destination 127.0.0.1:666
sudo iptables-nft -A INPUT -p tcp --dport 666 -j ACCEPT

# SSH - Port forwarding 22 (external) to 22 (internal)
sudo iptables-nft -t nat -A PREROUTING -p tcp --dport 22 -j DNAT --to-destination 127.0.0.1:22

# Proxmox - Port forwarding 6666 (external) to 8006 (internal)
sudo iptables-nft -t nat -A PREROUTING -p tcp --dport 6666 -j DNAT --to-destination 127.0.0.1:8006

# Allow HTTP and HTTPS
sudo iptables-nft -A INPUT -p tcp --dport 80 -j ACCEPT
sudo iptables-nft -A INPUT -p tcp --dport 443 -j ACCEPT

# Default DROP policy for INPUT and FORWARD chains
sudo iptables-nft -P INPUT DROP
sudo iptables-nft -P FORWARD DROP

# Allow outgoing connections
sudo iptables-nft -A OUTPUT -j ACCEPT

# Save the rules (crucial!)
sudo iptables-nft-save > /etc/iptables/rules.v4

# Make rules persistent (Debian/Ubuntu example)
sudo apt-get install iptables-persistent  # If not already installed
sudo iptables-persistent save


# web access and SSH - end

# additional IP
    
# additional IP

# creating private LAN - start
    - create a bridge interface
        /etc/network/interfaces
            auto vmbr0
            iface vmbr0 inet static
            address  1.1.1.254
        bridge-ports none
        bridge-stp off
        bridge-fd 0   
# creating private LAN - end


